{"version":3,"file":"angular-cc-library.js","sources":["../../projects/angular-cc-library/src/lib/credit-card.ts","../../projects/angular-cc-library/src/lib/validators.ts","../projects/angular-cc-library/src/lib/directives/credit-card-format.directive.ts","../projects/angular-cc-library/src/lib/directives/cvc-format.directive.ts","../projects/angular-cc-library/src/lib/directives/expiry-format.directive.ts","../../projects/angular-cc-library/src/lib/credit-card-directives.module.ts","../../../projects/angular-cc-library/src/public-api.ts","../../../projects/angular-cc-library/src/angular-cc-library.ts"],"sourcesContent":["const defaultFormat = /(\\d{1,4})/g;\n\nexport interface CardDefinition {\n  type: string;\n  patterns: number[];\n  format: RegExp;\n  length: number[];\n  cvvLength: number[];\n  luhn: boolean;\n}\n\nconst cards: CardDefinition[] = [\n  {\n    type: 'maestro',\n    patterns: [5018, 502, 503, 506, 56, 58, 639, 6220, 67],\n    format: defaultFormat,\n    length: [12, 13, 14, 15, 16, 17, 18, 19],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'forbrugsforeningen',\n    patterns: [600],\n    format: defaultFormat,\n    length: [16],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'dankort',\n    patterns: [5019],\n    format: defaultFormat,\n    length: [16],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'visa',\n    patterns: [4],\n    format: defaultFormat,\n    length: [13, 16, 19],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'mastercard',\n    patterns: [51, 52, 53, 54, 55, 22, 23, 24, 25, 26, 27],\n    format: defaultFormat,\n    length: [16],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'amex',\n    patterns: [34, 37],\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,5})?/,\n    length: [15],\n    cvvLength: [3, 4],\n    luhn: true,\n  }, {\n    type: 'dinersclub',\n    patterns: [30, 36, 38, 39],\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,4})?/,\n    length: [14],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'discover',\n    patterns: [60, 64, 65, 622],\n    format: defaultFormat,\n    length: [16],\n    cvvLength: [3],\n    luhn: true,\n  }, {\n    type: 'unionpay',\n    patterns: [62, 88],\n    format: defaultFormat,\n    length: [16, 17, 18, 19],\n    cvvLength: [3],\n    luhn: false,\n  }, {\n    type: 'jcb',\n    patterns: [35],\n    format: defaultFormat,\n    length: [16, 19],\n    cvvLength: [3],\n    luhn: true,\n  },\n];\n\n// @dynamic\nexport class CreditCard {\n\n  public static cards() {\n    return cards;\n  }\n\n  public static cardFromNumber(num: string): CardDefinition {\n    num = (num + '').replace(/\\D/g, '');\n\n    for (let i = 0, len = cards.length; i < len; i++) {\n      const card = cards[i];\n      const ref = card.patterns;\n\n      for (let j = 0, len1 = ref.length; j < len1; j++) {\n        const pattern = ref[j];\n        const p = pattern + '';\n\n        if (num.substr(0, p.length) === p) {\n          return card;\n        }\n      }\n    }\n  }\n\n  public static restrictNumeric(e: KeyboardEvent): boolean {\n    if (e.metaKey || e.ctrlKey) {\n      return true;\n    }\n    if (e.which === 32) {\n      return false;\n    }\n    if (e.which === 0) {\n      return true;\n    }\n    if (e.which < 33) {\n      return true;\n    }\n    const input = String.fromCharCode(e.which);\n    return !!/[\\d\\s]/.test(input);\n  }\n\n  public static hasTextSelected(target: HTMLInputElement) {\n    return target.selectionStart !== null && target.selectionStart !== target.selectionEnd;\n  }\n\n  public static cardType(num: string) {\n    if (!num) {\n      return num;\n    }\n\n    const card = this.cardFromNumber(num);\n\n    if (card !== null && typeof card !== 'undefined') {\n      return card.type;\n    } else {\n      return null;\n    }\n  }\n\n  public static formatCardNumber(num: string) {\n    num = num.replace(/\\D/g, '');\n    const card = this.cardFromNumber(num);\n\n    if (!card) {\n      return num;\n    }\n\n    const upperLength = card.length[card.length.length - 1];\n    num = num.slice(0, upperLength);\n\n    if (card.format.global) {\n      const matches = num.match(card.format);\n      if (matches != null) {\n        return matches.join(' ');\n      }\n    } else {\n      const groups = card.format.exec(num);\n      if (groups == null) {\n        return;\n      }\n      groups.shift();\n      return groups.filter(Boolean).join(' ');\n    }\n  }\n\n  public static safeVal(value: string, target: HTMLInputElement, updateValue: (value: string) => void): number {\n    let cursor: number | null = null;\n    const last = target.value;\n    let result: number = null;\n\n    try {\n      cursor = target.selectionStart;\n    } catch (error) {}\n\n    updateValue(value);\n\n    if (cursor !== null && target === document.activeElement) {\n      if (cursor === last.length) {\n        cursor = value.length;\n      }\n\n      if (last !== value) {\n        const prevPair = last.slice(cursor - 1, +cursor + 1 || 9e9);\n        const currPair = value.slice(cursor - 1, +cursor + 1 || 9e9);\n        const digit = value[cursor];\n\n        if (/\\d/.test(digit) && prevPair === (`${digit} `) && currPair === (` ${digit}`)) {\n          cursor = cursor + 1;\n        }\n      }\n\n      result = cursor;\n    }\n    return result;\n  }\n\n  public static isCardNumber(key: number, target: HTMLInputElement): boolean {\n    const digit = String.fromCharCode(key);\n    if (!/^\\d+$/.test(digit)) {\n      return false;\n    }\n    if (CreditCard.hasTextSelected(target)) {\n      return true;\n    }\n    const value = (target.value + digit).replace(/\\D/g, '');\n    const card = CreditCard.cardFromNumber(value);\n\n    if (card) {\n      return value.length <= card.length[card.length.length - 1];\n    } else {\n      return value.length <= 16;\n    }\n  }\n\n  public static restrictExpiry(key: number, target: HTMLInputElement) {\n    const digit = String.fromCharCode(key);\n    if (!/^\\d+$/.test(digit) || this.hasTextSelected(target)) {\n      return false;\n    }\n    const value = `${target.value}${digit}`.replace(/\\D/g, '');\n\n    return value.length > 6;\n  }\n\n  public static replaceFullWidthChars(str: string) {\n    if (str === null) {\n      str = '';\n    }\n\n    const fullWidth = '\\uff10\\uff11\\uff12\\uff13\\uff14\\uff15\\uff16\\uff17\\uff18\\uff19';\n    const halfWidth = '0123456789';\n    let value = '';\n    const chars = str.split('');\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < chars.length; i++) {\n      let chr = chars[i];\n      const idx = fullWidth.indexOf(chr);\n      if (idx > -1) {\n        chr = halfWidth[idx];\n      }\n      value += chr;\n    }\n    return value;\n  }\n\n  public static formatExpiry(expiry: string) {\n    const parts = expiry.match(/^\\D*(\\d{1,2})(\\D+)?(\\d{1,4})?/);\n\n    if (!parts) {\n      return '';\n    }\n\n    let mon  = parts[1] || '';\n    let sep  = parts[2] || '';\n    const year = parts[3] || '';\n\n    if (year.length > 0) {\n      sep = ' / ';\n    } else if (sep === ' /') {\n      mon = mon.substring(0, 1);\n      sep = '';\n    } else if (mon.length === 2 || sep.length > 0) {\n      sep = ' / ';\n    } else if (mon.length === 1 && (mon !== '0' && mon !== '1')) {\n      mon = `0${mon}`;\n      sep = ' / ';\n    }\n    return `${mon}${sep}${year}`;\n  }\n\n  public static restrictCvc(key: number, target: HTMLInputElement) {\n    const digit = String.fromCharCode(key);\n    if (!/^\\d+$/.test(digit) || this.hasTextSelected(target)) {\n      return false;\n    }\n    const val = `${target.value}${digit}`;\n    return val.length <= 4;\n  }\n\n  public static luhnCheck(num: string) {\n    const digits = num.split('').reverse();\n    let odd = true;\n    let sum = 0;\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < digits.length; i++) {\n      let digit = parseInt(digits[i], 10);\n      // tslint:disable-next-line:no-conditional-assignment\n      if ((odd = !odd)) {\n        digit *= 2;\n      }\n      if (digit > 9) {\n        digit -= 9;\n      }\n      sum += digit;\n    }\n\n    return sum % 10 === 0;\n  }\n}\n","import { AbstractControl, ValidationErrors, Validators } from '@angular/forms';\nimport { CreditCard } from './credit-card';\n\nexport class CreditCardValidators {\n  public static validateCCNumber(control: AbstractControl): ValidationErrors | null {\n    if (Validators.required(control) !== undefined && Validators.required(control) !== null) {\n      return {ccNumber: true};\n    }\n\n    const num = control.value.toString().replace(/\\s+|-/g, '');\n\n    if (!/^\\d+$/.test(num)) {\n      return {ccNumber: true};\n    }\n\n    const card = CreditCard.cardFromNumber(num);\n\n    if (!card) {\n      return {ccNumber: true};\n    }\n\n    if (card.length.includes(num.length) && (card.luhn === false || CreditCard.luhnCheck(num))) {\n      return null;\n    }\n\n    const upperlength = card.length[card.length.length - 1];\n    if (num.length > upperlength) {\n      const registeredNum = num.substring(0, upperlength);\n      if (CreditCard.luhnCheck(registeredNum)) {\n        return null;\n      }\n    }\n\n    return {ccNumber: true};\n  }\n\n  public static validateExpDate(control: AbstractControl): ValidationErrors | null {\n    if (Validators.required(control) !== undefined && Validators.required(control) !== null) {\n      return {expDate: true};\n    }\n\n    if (typeof control.value !== 'undefined' && control.value.length >= 5) {\n      let [month, year] = control.value.split(/[\\s\\/]+/, 2);\n\n      if ((year != null ? year.length : void 0) === 2 && /^\\d+$/.test(year)) {\n        const prefix = new Date().getFullYear().toString().slice(0, 2);\n        year = prefix + year;\n      }\n\n      month = parseInt(month, 10).toString();\n      year = parseInt(year, 10).toString();\n\n      if (/^\\d+$/.test(month) && /^\\d+$/.test(year) && (month >= 1 && month <= 12)) {\n        const expiry = new Date(year, month);\n        const currentTime = new Date();\n        expiry.setMonth(expiry.getMonth() - 1);\n        expiry.setMonth(expiry.getMonth() + 1, 1);\n\n        if (expiry > currentTime) {\n          return null;\n        }\n      }\n    }\n\n    return {expDate: true};\n  }\n}\n\n","import { Directive, ElementRef, HostListener, Optional, Self } from '@angular/core';\nimport { CreditCard } from '../credit-card';\nimport { NgControl } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\n\n@Directive({\n  selector: '[ccNumber]',\n  exportAs: 'ccNumber',\n})\nexport class CreditCardFormatDirective {\n  private target: HTMLInputElement;\n  private cards = CreditCard.cards();\n\n  public resolvedScheme$ = new BehaviorSubject<string>('unknown');\n\n  constructor(\n    private el: ElementRef,\n    @Self() @Optional() private control: NgControl,\n  ) {\n    this.target = this.el.nativeElement;\n  }\n\n  /**\n   * Updates the value to target element, or FormControl if exists.\n   * @param value New input value.\n   */\n  private updateValue(value: string) {\n    if (this.control) {\n      this.control.control.setValue(value);\n    } else {\n      this.target.value = value;\n    }\n  }\n\n  @HostListener('keypress', ['$event'])\n  public onKeypress(e: KeyboardEvent) {\n    if (CreditCard.restrictNumeric(e)) {\n      if (CreditCard.isCardNumber(e.which, this.target)) {\n        this.formatCardNumber(e);\n      }\n    } else {\n      e.preventDefault();\n    }\n  }\n\n  @HostListener('keydown', ['$event'])\n  public onKeydown(e: KeyboardEvent) {\n    this.formatBackCardNumber(e);\n    this.reFormatCardNumber();\n  }\n\n  @HostListener('keyup')\n  public onKeyup() {\n    this.setCardType();\n  }\n\n  @HostListener('paste')\n  public onPaste() {\n    this.reFormatCardNumber();\n  }\n\n  @HostListener('change')\n  public onChange() {\n    this.reFormatCardNumber();\n  }\n\n  @HostListener('input')\n  public onInput() {\n    this.reFormatCardNumber();\n    this.setCardType();\n  }\n\n  private formatCardNumber(e: KeyboardEvent) {\n    const digit = String.fromCharCode(e.which);\n    if (!/^\\d+$/.test(digit)) {\n      return;\n    }\n\n    const value = this.target.value;\n    const card = CreditCard.cardFromNumber(value + digit);\n    const length = (value.replace(/\\D/g, '') + digit).length;\n    const upperLength = card ? card.length[card.length.length - 1] : 19;\n\n    if (length >= upperLength) {\n      return;\n    }\n  }\n\n  private formatBackCardNumber(e: KeyboardEvent) {\n    const value = this.target.value;\n    const selStart = this.target.selectionStart;\n\n    if (e.which !== 8) {\n      return;\n    }\n\n    if (selStart != null\n      && selStart === this.target.selectionEnd\n      && selStart > 0\n      && selStart !== value.length\n      && value[selStart - 1] === ' ') {\n      e.preventDefault();\n      if (selStart <= 2) {\n        this.updateValue(value.slice(selStart));\n        this.target.selectionStart = 0;\n        this.target.selectionEnd = 0;\n      } else {\n        this.updateValue(value.slice(0, selStart - 2) + value.slice(selStart));\n        this.target.selectionStart = selStart - 2;\n        this.target.selectionEnd = selStart - 2;\n      }\n    }\n  }\n\n  private setCardType() {\n    const cardType = CreditCard.cardType(this.target.value) || 'unknown';\n\n    this.resolvedScheme$.next(cardType);\n\n    if (!this.target.classList.contains(cardType)) {\n      this.cards.forEach((card) => {\n        this.target.classList.remove(card.type);\n      });\n\n      this.target.classList.remove('unknown');\n      this.target.classList.add(cardType);\n      this.target.classList.toggle('identified', cardType !== 'unknown');\n    }\n  }\n\n  private reFormatCardNumber() {\n    const value = CreditCard.formatCardNumber(\n      CreditCard.replaceFullWidthChars(this.target.value),\n    );\n    const oldValue = this.target.value;\n    if (value !== oldValue) {\n      this.target.selectionStart = this.target.selectionEnd = CreditCard.safeVal(value, this.target, (safeVal => {\n        this.updateValue(safeVal);\n      }));\n    }\n  }\n}\n","import { Directive, ElementRef, HostListener, Optional, Self } from '@angular/core';\nimport { CreditCard } from '../credit-card';\nimport { NgControl } from '@angular/forms';\n\n@Directive({\n  selector: '[ccCVC]',\n})\nexport class CvcFormatDirective {\n  private target: HTMLInputElement;\n\n  constructor(\n    private el: ElementRef,\n    @Self() @Optional() private control: NgControl,\n  ) {\n    this.target = this.el.nativeElement;\n  }\n\n  /**\n   * Updates the value to target element, or FormControl if exists.\n   * @param value New input value.\n   */\n  private updateValue(value: string) {\n    if (this.control) {\n      this.control.control.setValue(value);\n    } else {\n      this.target.value = value;\n    }\n  }\n\n  @HostListener('keypress', ['$event'])\n  public onKeypress(e: KeyboardEvent) {\n    if (!CreditCard.restrictNumeric(e) && !CreditCard.restrictCvc(e.which, this.target)) {\n      e.preventDefault();\n    }\n  }\n\n  @HostListener('paste')\n  @HostListener('change')\n  @HostListener('input')\n  public reformatCvc() {\n    const val = CreditCard.replaceFullWidthChars(this.target.value)\n      .replace(/\\D/g, '')\n      .slice(0, 4);\n    const oldVal = this.target.value;\n    if (val !== oldVal) {\n      this.target.selectionStart = this.target.selectionEnd = CreditCard.safeVal(val, this.target, (safeVal => {\n        this.updateValue(safeVal);\n      }));\n    }\n  }\n}\n","import { Directive, ElementRef, HostListener, Optional, Self } from '@angular/core';\nimport { CreditCard } from '../credit-card';\nimport { NgControl } from '@angular/forms';\n\n@Directive({\n  selector: '[ccExp]',\n})\nexport class ExpiryFormatDirective {\n  private target: HTMLInputElement;\n\n  constructor(\n    private el: ElementRef,\n    @Self() @Optional() private control: NgControl,\n  ) {\n    this.target = this.el.nativeElement;\n  }\n\n  /**\n   * Updates the value to target element, or FormControl if exists.\n   * @param value New input value.\n   */\n  private updateValue(value: string) {\n    if (this.control) {\n      this.control.control.setValue(value);\n    } else {\n      this.target.value = value;\n    }\n  }\n\n  @HostListener('keypress', ['$event'])\n  public onKeypress(e: KeyboardEvent) {\n    if (CreditCard.restrictNumeric(e)) {\n      if (CreditCard.restrictExpiry(e.which, this.target)) {\n        this.formatExpiry(e);\n        this.formatForwardSlashAndSpace(e);\n        this.formatForwardExpiry(e);\n      }\n    } else {\n      e.preventDefault();\n      return false;\n    }\n  }\n\n  @HostListener('keydown', ['$event'])\n  public onKeydown(e: KeyboardEvent) {\n    if (CreditCard.restrictNumeric(e) && CreditCard.restrictExpiry(e.which, this.target)) {\n      this.formatBackExpiry(e);\n    }\n  }\n\n  @HostListener('change')\n  public onChange() {\n    this.reformatExpiry();\n  }\n\n  @HostListener('input')\n  public onInput() {\n    this.reformatExpiry();\n  }\n\n  private formatExpiry(e: KeyboardEvent) {\n    const digit = String.fromCharCode(e.which);\n    const val = `${this.target.value}${digit}`;\n\n    if (!/^\\d+$/.test(digit)) {\n      return;\n    }\n\n    if (/^\\d$/.test(val) && (val !== '0' && val !== '1')) {\n      e.preventDefault();\n      this.updateValue(`0${val} / `);\n    } else if (/^\\d\\d$/.test(val)) {\n      e.preventDefault();\n      const m1 = parseInt(val[0], 10);\n      const m2 = parseInt(val[1], 10);\n      if (m2 > 2 && m1 !== 0) {\n        this.updateValue(`0${m1} / ${m2}`);\n      } else {\n        this.updateValue(`${val} / `);\n      }\n\n    }\n  }\n\n  private formatForwardSlashAndSpace(e: KeyboardEvent) {\n    const which = String.fromCharCode(e.which);\n    const val = this.target.value;\n\n    if (!(which === '/' || which === ' ')) {\n      return false;\n    }\n    if (/^\\d$/.test(val) && val !== '0') {\n      this.updateValue(`0${val} / `);\n    }\n  }\n\n  private formatForwardExpiry(e: KeyboardEvent) {\n    const digit = String.fromCharCode(e.which);\n    const val = this.target.value;\n\n    if (!/^\\d+$/.test(digit) && /^\\d\\d$/.test(val)) {\n      this.updateValue(this.target.value = `${val} / `);\n    }\n  }\n\n  private formatBackExpiry(e: KeyboardEvent) {\n    const val = this.target.valueOf as unknown as string;\n\n    if (e.which !== 8) {\n      return;\n    }\n    if ((this.target.selectionStart != null) && this.target.selectionStart !== val.length) {\n      return;\n    }\n    if (/\\d\\s\\/\\s$/.test(val)) {\n      e.preventDefault();\n      this.updateValue(val.replace(/\\d\\s\\/\\s$/, ''));\n    }\n  }\n\n  private reformatExpiry() {\n    const val = CreditCard.formatExpiry(\n      CreditCard.replaceFullWidthChars(this.target.value),\n    );\n\n    const oldVal = this.target.value;\n    if (val !== oldVal) {\n      this.target.selectionStart = this.target.selectionEnd = CreditCard.safeVal(val, this.target, (safeVal => {\n        this.updateValue(safeVal);\n      }));\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { CreditCardFormatDirective } from './directives/credit-card-format.directive';\nimport { ExpiryFormatDirective } from './directives/expiry-format.directive';\nimport { CvcFormatDirective } from './directives/cvc-format.directive';\n\nconst CREDIT_CARD_LIBRARY_DIRECTIVES = [\n  CreditCardFormatDirective,\n  ExpiryFormatDirective,\n  CvcFormatDirective,\n];\n\n@NgModule({\n  declarations: [CREDIT_CARD_LIBRARY_DIRECTIVES],\n  exports: [CREDIT_CARD_LIBRARY_DIRECTIVES],\n})\nexport class CreditCardDirectivesModule {\n}\n","/*\n * Public API Surface of angular-cc-library\n */\n\nexport * from './lib/validators';\nexport * from './lib/credit-card';\n\nexport * from './lib/directives/credit-card-format.directive';\nexport * from './lib/directives/cvc-format.directive';\nexport * from './lib/directives/expiry-format.directive';\n\nexport * from './lib/credit-card-directives.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}